# Программный макет для обнаружения аномальной сетевой активности

## Описание

Этот программный макет предназначен для обнаружения аномальной сетевой активности на хосте с использованием методов машинного обучения. Программа выполняет следующие задачи:

1. **Сбор трафика**: Захват сетевого трафика на сетевом интерфейсе и сохранение его в формате pcap.
2. **Оцифровка данных**: Преобразование собранного трафика в двумерную матрицу, где каждая строка соответствует элементу анализа.
3. **Обучение нейронной сети**: Обучение нейронной сети с использованием собранных данных.
4. **Выбор порога аномальности**: Определение порога аномальности на основании ошибок восстановления.
5. **Обнаружение аномалий**: Непрерывный сбор, оцифровка и проверка данных на предмет аномальности.
6. **Формирование отчетов**: Создание отчетов об обнаруженных аномалиях.

## Установка

1. Клонируйте репозиторий:
    ```bash
    git clone https://github.com/innokeny/anomalyNET.git
    cd anomalyNET
    ```

2. Установите необходимые зависимости:
    ```bash
    pip install -r requirements.txt
    ```

## Использование

### Обучение

1. **Сбор трафика**:
    ```bash
    python capture_traffic.py --duration 86400 --output training_traffic.pcap
    ```

2. **Оцифровка данных**:
    ```bash
    python data_digitization.py --input training_traffic.pcap --output training_features.csv
    ```

3. **Обучение нейронной сети**:
    Запустите Jupyter Notebook и выполните все ячейки в `neural_network_training.ipynb`.

### Обнаружение аномалий

1. **Запуск обнаружения аномалий**:
    ```bash
    python anomaly_check.py
    ```

## Результаты тестирования

Пример обнаружения аномалий:

```
Порог аномальности: 0.0054
Обнаружено аномалий: 1914 из 491102 строк датасета
```

## Дополнительные функции 

- **Непрерывный мониторинг**: Модель может работать в режиме непрерывного мониторинга, собирая и анализируя сетевой трафик в реальном времени.
- **Логирование**: Все действия и обнаруженные аномалии логируются в файл `anomaly_detection.log`.
- **Генерация отчетов**: Отчеты об обнаруженных аномалиях сохраняются в формате CSV для последующего анализа.

## Формат данных

Данные представлены в виде двумерной матрицы, где каждая строка соответствует одному сетевому пакету и содержит следующие признаки:

- **length**: Длина пакета.
- **src_ip1, src_ip2, ..., src_ip8**: Нормализованные значения октетов (для IPv4) или групп (для IPv6) IP-адреса источника.
- **src_is_ipv6**: Флаг, указывающий, является ли IP-адрес источника IPv6.
- **dst_ip1, dst_ip2, ..., dst_ip8**: Нормализованные значения октетов (для IPv4) или групп (для IPv6) IP-адреса назначения.
- **dst_is_ipv6**: Флаг, указывающий, является ли IP-адрес назначения IPv6.
- **ttl**: Время жизни пакета (TTL), нормализованное значение.
- **proto**: Протокол (TCP/UDP), нормализованное значение.
- **sport**: Порт источника, нормализованное значение.
- **dport**: Порт назначения, нормализованное значение.
- **flags**: Флаги TCP, нормализованное значение.

Такой формат данных позволяет эффективно использовать их для обучения нейронной сети и последующего обнаружения аномалий.


